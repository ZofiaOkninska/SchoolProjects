<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Lekcja 4 - 1</title>
  <style>
  *{
    margin: 0;
  }
  #area{
    background-color: green;
    z-index: 0;
    width:700px;
    height: 500px;
    position: relative;
    float:left;
  }
  img{
    position: absolute;
    z-index: 1;
  }
  img[src="bee.png"]{
    top:100px;
    right:100px;
    z-index: 2;
  }
  button{
    display: block;
    width:100px;
  }
  </style>
  <script src="../libs/jq.min.js"></script>
  <script>
  $(document).ready(function () {
    var route = []
    var tableOfVectors = []
    var number = 0
    var count = 0
    var start = false

    function getRoute(i) {
      i = {
        top : event.clientY,
        left : event.clientX
      }
      route.push(i)
      console.log(route)
      return route[route.length - 1]
    }

    function addFlower(i) {
      var div = $('<div>')
      .html("<h2>" + number + "</h2>")
      .width(100)
      .height(100)
      .css({
        top : i.top - 50,
        left : i.left - 50,
        position : "absolute",
        zIndex : 1,
        backgroundImage : "url('flower.png')",
        textAlign : "center"
      });
      $("#area").append(div)
      number++
    }

    function stepBee(i) {
      $("[src='bee.png']").css({
        top : i.top,
        left : i.left
      });
    }

    function setVectors () {
      var vector, a, b
      for (var j = 0; j < route.length - 1; j++) {
        a = route[j]
        b = route[j + 1]
        vector = {
          top : (b.top - a.top),
          left : (b.left - a.left)
        }
        tableOfVectors.push(vector)
        console.log(vector)
      }
    }

    function moveOfVector (i) {

    }

    $("#area").on("click", function () {
      addFlower(getRoute())
    })

    $("#step").on("click", function () {
      count = count % route.length;
      stepBee(route[count])
      count++
    })

    $("#jump").on("click", function () {
      count = 0
      setInterval(function (){
        count = count % route.length;
        stepBee(route[count])
        count++
      },1000)
    })
//function setaddbee
    function animateBee() {
      var currentPosition = route[0]
      stepBee(currentPosition)
      count = 0
      start = true
      if (start) {
        setVectors()
        count = count % tableOfVectors.length;
        stepBee(currentPosition += tableOfVectors[count])
        count++
      }
      requestAnimationFrame(animateBee)
    }

    $("#fly").on("click", function () {
      clearInterval();
      animateBee()
    })
  })
  </script>
</head>

<body>
  <div id="area">
    <img src="bee.png"/>
  </div>
  <button id="step">STEP</button>
  <button id="jump">JUMP</button>
  <button id="fly">FLY</button>
</body>

</html>
